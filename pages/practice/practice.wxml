<view class="practice-container">
  <!-- é¡¶éƒ¨è¿›åº¦æ  -->
  <view class="progress-bar">
    <view class="progress-info">
      <text class="progress-text">ç¬¬ {{currentIndex + 1}} / {{totalCount}} é¢˜</text>
      <text class="tag-badge">{{currentQuestion.tag}}</text>
    </view>
    <view class="progress-track">
      <view class="progress-fill" style="width: {{progress}}%"></view>
    </view>
  </view>

  <!-- é¢˜ç›®å¡ç‰‡ -->
  <view class="question-card">
    <view class="question-type">
      <text class="type-badge">{{currentQuestion.type === 'conversion' ? 'è½¬æ¢é¢˜' : 'å¥å­é¢˜'}}</text>
    </view>
    
    <view class="question-content">
      <text class="question-text">{{currentQuestion.question}}</text>
    </view>
  </view>

  <!-- é€‰é¡¹åŒºåŸŸ -->
  <view class="options-container">
    <view 
      wx:for="{{currentQuestion.options}}" 
      wx:key="index"
      class="option-item {{selectedIndex === index ? 'selected' : ''}} {{showAnswer && index === currentQuestion.correctAnswer ? 'correct' : ''}} {{showAnswer && selectedIndex === index && index !== currentQuestion.correctAnswer ? 'wrong' : ''}}"
      bindtap="selectOption"
      data-index="{{index}}"
    >
      <view class="option-label">{{optionLabels[index]}}</view>
      <text class="option-text">{{item}}</text>
      <view class="option-icon" wx:if="{{showAnswer}}">
        <text wx:if="{{index === currentQuestion.correctAnswer}}">âœ“</text>
        <text wx:elif="{{selectedIndex === index}}">âœ—</text>
      </view>
    </view>
  </view>

  <!-- ç­”æ¡ˆè§£æ -->
  <view class="explanation-card" wx:if="{{showAnswer}}">
    <view class="explanation-header">
      <text class="explanation-icon">ğŸ’¡</text>
      <text class="explanation-title">ç­”æ¡ˆè§£æ</text>
    </view>
    <view class="explanation-content">
      <view class="correct-answer">
        <text class="label">æ­£ç¡®ç­”æ¡ˆï¼š</text>
        <text class="answer">{{currentQuestion.options[currentQuestion.correctAnswer]}}</text>
      </view>
      <text class="explanation-text">{{currentQuestion.explanation}}</text>
    </view>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="bottom-actions">
    <button 
      class="action-btn submit-btn" 
      wx:if="{{!showAnswer}}"
      bindtap="submitAnswer"
      disabled="{{selectedIndex === -1}}"
    >
      æäº¤ç­”æ¡ˆ
    </button>
    
    <button 
      class="action-btn next-btn" 
      wx:if="{{showAnswer && currentIndex < totalCount - 1}}"
      bindtap="nextQuestion"
    >
      ä¸‹ä¸€é¢˜
    </button>
    
    <button 
      class="action-btn finish-btn" 
      wx:if="{{showAnswer && currentIndex === totalCount - 1}}"
      bindtap="finishPractice"
    >
      å®Œæˆç»ƒä¹ 
    </button>
  </view>
</view>
